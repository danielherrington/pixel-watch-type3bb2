<manifest xmlns:android="http://schemas.android.com/apk/res/android">
    <uses-feature android:name="android.hardware.type.watch" />
    <uses-feature android:name="android.software.live_wallpaper" />
    <uses-permission android:name="android.permission.WAKE_LOCK" />

    <application
        android:label="Ressence BB2"
        android:allowBackup="true">

        <!-- 
          Service declaration required for the system to recognize this as a Watch Face.
          Even for XML-only faces, we declare the service that handles the format.
          Use the standard AndroidX class if using Jetpack, or the platform one.
          For strict WFF without Java, the system looks for the property, BUT 
          the manifest usually still needs a service entry point for the picker.
          
          However, for API 34+ WFF, the property might be enough IF the package is valid.
          But to be safe and standard, we add the service block pointing to the
          Google WatchFaceService class which handles the XML.
        -->
        <meta-data
            android:name="com.google.android.wearable.watchface.preview"
            android:resource="@drawable/preview" />
        <meta-data
            android:name="com.google.android.wearable.watchface.preview_circular"
            android:resource="@drawable/preview" />


        <!-- 
            Trampoline Activity to verify installation. 
            Allows user to "Open" the app to confirm it is on the device.
        -->
        <activity
            android:name=".MainActivity"
            android:exported="true"
            android:label="Ressence BB2">
            <intent-filter>
                <action android:name="android.intent.action.MAIN" />
                <category android:name="android.intent.category.LAUNCHER" />
            </intent-filter>
        </activity>

        <!-- 
            Service required for Picker Discovery.
            Even though we use WFF XML for rendering, this Service entry is mandatory
            for the system to list the watch face in the "Add New" menu.
        -->
        <!-- 
           Jetpack WatchFaceService Implementation.
           Reverting to "Heavy" Service to ensure discovery on Wear OS 6.
        -->
        <service
            android:name="com.example.ressencebb2.RessenceWatchFaceService"
            android:exported="true"
            android:label="Ressence BB2"
            android:permission="android.permission.BIND_WALLPAPER">
            <intent-filter>
                <action android:name="android.service.wallpaper.WallpaperService" />
                <category android:name="com.google.android.wearable.watchface.category.WATCH_FACE" />
            </intent-filter>

            <meta-data
                android:name="com.google.android.wearable.watchface.preview"
                android:resource="@drawable/preview" />
            <meta-data
                android:name="com.google.android.wearable.watchface.preview_circular"
                android:resource="@drawable/preview" />
            <meta-data
                android:name="android.service.wallpaper"
                android:resource="@xml/watch_face" />
        </service>

        <property
            android:name="com.google.android.wearable.watchface.format"
            android:resource="@raw/watchface_sample" />

    </application>
</manifest>
